<html>
    <head>
        <title>Tweeter</title>
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection"/>
        <link  type="text/css" href="css/page-center.css" rel="stylesheet">

        <!--Let browser know website is optimized for mobile-->
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </head>

    <script>
        function sendMessage(){
            var message = document.getElementById("textarea").value;
            
            var array = splitMessage("Requests a of stupid. City, more organization vices gentlemen, is word the a five. She reasoning finds hometown over now be in the sign us, escape, from the of he being that ensure each luxury writing someone he a copy by desk narrow front dissolute they field is relays mouse.");
            var ul = document.getElementById("messages");
            for(var i = 0; i < array.length; i++){
                if(array[i] != undefined){
                    var li = document.createElement("li");
                    li.appendChild(document.createTextNode(array[i]));
                    li.setAttribute("class", "collection-item");
                    ul.appendChild(li);
                    console.log(array[i]);
                }
            }
            
        }

        function splitMessage(msg){
            console.log(msg.length);

            var substrings = msg.split(" ");
            var grossChars = 0;
            for(var i = 0; i < substrings.length; i++){
                grossChars += substrings[i].length;
                console.log(substrings[i]);
            }

            var grossCount = Math.ceil(grossChars / 50);
            console.log("Gross chars: " + grossChars);
            console.log("Gross count: " + grossCount);
            
            var addChars = grossCount * 4;
            console.log("Additional chars: " + addChars);
            
            var totalChars = grossChars + addChars;
            console.log("Total chars: " + totalChars);
            
            var totalCount = Math.ceil(totalChars / 50);
            console.log("Total count: " + totalCount);

            var array = new Array(totalCount);
            var ind = "";
            var ctr = 0;
            for(var i = 0; i < totalCount; i++){
                ind = (i + 1) + "/" + totalCount;

                var currString = ind;
                while (currString.length < 50){
                    var checker = currString + " " + substrings[ctr];
                    if(checker.length > 50){
                        array.push(currString);
                        break;
                    }else{
                        currString += " " + substrings[ctr];
                        ctr++;
                    }
                }
                console.log(currString + " " + currString.length);
            }
            return array;
        }
    </script>

    <body class="cyan">
        <div class="row">
            <div class="col s12 l12 z-depth-3 card-panel">
                <h5>New Message</h5>
                <form class="col s12" onsubmit="return false" >
                    <div class="row">
                        <div class="input-field col s12">
                            <textarea id="textarea" class="materialize-textarea"></textarea>
                            <label for="textarea">Enter your message...</label>
                        </div>
                    </div>
                    <button class="btn waves-effect waves-light right" type="submit" onclick="sendMessage()">Submit
                        <i class="material-icons right">send</i>
                    </button>
                </form>
            </div>
            <div class="col s12 l12 z-depth-3 card-panel">
                    <ul id="messages" class="collection with-header">
                        <li class="collection-header"><h4>Your Messages</h4></li>
                    </ul>
            </div>
        </div>
        <script type="text/javascript" src="js/materialize.min.js"></script>
    </body>
</html>